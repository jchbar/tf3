<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Aprendiendo a utilizar la librería cURL en PHP | Web.Ontuts</title>

<link rel="stylesheet" href="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/style.css" type="text/css" media="screen">
<link rel="stylesheet" href="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/style_002.css" type="text/css" media="screen">
<!--[if IE 6]><link rel="stylesheet" href="http://web.ontuts.com/wp-content/themes/ontuts/ie6.css" type="text/css" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="http://web.ontuts.com/wp-content/themes/ontuts/ie7.css" type="text/css" media="screen" /><![endif]-->
<link rel="pingback" href="http://web.ontuts.com/xmlrpc.php">
<link rel="shortcut icon" href="http://web.ontuts.com/wp-content/themes/ontuts/img/favicon.png">

<style type="text/css" media="screen">

	#page { background: url("http://web.ontuts.com/wp-content/themes/ontuts/images/kubrickbgwide.jpg") repeat-y top; border: none; }

</style>



<link rel="alternate" type="application/rss+xml" title="Tutoriales de Desarrollo y Diseño Web | Web.Ontuts » Feed" href="http://web.ontuts.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Tutoriales de Desarrollo y Diseño Web | Web.Ontuts » RSS de los comentarios" href="http://web.ontuts.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Tutoriales de Desarrollo y Diseño Web | Web.Ontuts » Aprendiendo a utilizar la librería cURL en PHP RSS de los comentarios" href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/feed/">
<script type="text/javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/jquery.js"></script>
<script type="text/javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/comment-reply.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://web.ontuts.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://web.ontuts.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Logos que Inspiran Volumen #7" href="http://web.ontuts.com/inspiracion/logos-que-inspiran-volumen-7/">
<link rel="next" title="81 Iconos Pixel Art de Social Media" href="http://web.ontuts.com/recursos/81-iconos-pixel-art-de-social-media/">
<meta name="generator" content="WordPress 3.5.1">
<link rel="shortlink" href="http://web.ontuts.com/?p=2215">
	<link rel="stylesheet" href="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/facebook.css" type="text/css" media="screen">
	
<!-- All in One SEO Pack 1.6.10.2 by Michael Torbert of Semper Fi Web Design[291,406] -->
<meta name="description" content="Analizamos y explicamos la librería cURL, una herramienta que permite transferir información con sintaxis de URL. Soporta gran variedad de protocolos (HTTP, FTP, LDAP...) y esta funciona en gran variedad de sistemas operativos. En esta ocasión la utilizaremos en el entorno que a nosotros nos interesa, en PHP.">
<meta name="keywords" content="curl,php,programación,tutorial,tutoriales">
<link rel="canonical" href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/">
<!-- /all in one seo pack -->
	<link href="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/SyntaxHighlighter.css" type="text/css" rel="stylesheet">
	
<script type="text/javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/retweet.js"></script>

<script type="text/javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/ontuts.js"></script><script type="text/javascript" async="" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/bsa.js"></script><script type="text/javascript" id="_bsap_js_7066106cffa0603a51a460311c7893c7" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/s_7066106cffa0603a51a460311c7893c7.js" async="async"></script><style type="text/css" id="bsa_css">div.bsap_1246310{width:100%;display:block}div.bsap_1246310 a{width:125px}div.bsap_1246310 a img{padding:0}div.bsap_1246310 a em{font-style:normal}div.bsap_1246310 a{display:block;color:#8C8C8C;margin:0 4px 10px 0;text-align:center;text-decoration:none;overflow:hidden;float:left;}div.bsap_1246310 img{border:0;clear:right;}div.bsap_1246310 a.adhere{color:#8C8C8C;background:#171717;text-align:center;}div.bsap_1246310 a.adhere:hover{background:#171717;color:#8C8C8C;}div.bsap_1246310 a{line-height:100%}div.bsap_1246310 a.adhere{width:125px;height:125px;line-height:1000%}html>body div.bsap_1246310 a.adhere{width:123px;height:123px}div.bsap_1246310 img.s{height:0;width:0}</style></head>

<body class="single single-post postid-2215 single-format-standard">
    <!-- BuySellAds.com Ad Code -->
    <script type="text/javascript">
        (function(){
            var bsa = document.createElement('script');
            bsa.type = 'text/javascript';
            bsa.async = true;
            bsa.src = '//s3.buysellads.com/ac/bsa.js';
            (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
        })();
    </script>
    <!-- END BuySellAds.com Ad Code -->
<div class="wrapper">


<div id="top" class="clearfix">
	<h1 class="fleft">
		<a href="http://web.ontuts.com/">Tutoriales de Desarrollo y Diseño Web | Web.Ontuts</a>
	</h1>
	<ul id="menu" class="fleft">
		<li class="first">
			<a href="http://web.ontuts.com/category/tutoriales" title="">
				Tutoriales<br><span>Detallados &amp; Fáciles</span>
			</a>
		</li>
		<li>
			<a href="http://web.ontuts.com/category/recursos" title="">
				Recursos<br><span>Iconos, fuentes y más</span>
			</a>
		</li>
		<li>
			<a href="http://web.ontuts.com/category/inspiracion" title="">
				Inspiración<br><span>Despierta tu creatividad</span>
			</a>
		</li>
		<li class="last">
			<a href="http://web.ontuts.com/contacto" title="">
				Conócenos<br><span>Contacto &amp; Información</span>
			</a>
		</li>
	</ul>
</div>


<!-- start ad -->
<div id="large_ad">
    <a id="button_ad" href="http://web.ontuts.com/contacto"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/advertise_here.png"></a>
    <a class="banner" href="http://themeforest.net/user/AdrianMG/portfolio?ref=adrianmg"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/themes_banner.png" alt="Monster banner"></a>
</div>
<!-- finishesh ad -->
<div class="wrapcontent clearfix">
	<div id="content" class="fleft" role="main">

	
		<div class="wrappost">
			<div class="post entry">
				<div class="entry">
					<div class="clearfix wrapentry">
						<div class="fleft">
														<a href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/" title=""><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/curl.png" alt=""></a>
						</div>
						<div class="info fright clearfix" id="post-2215">
							<h2>
								<a href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/" rel="bookmark" title="Permanent Link to Aprendiendo a utilizar la librería cURL en PHP">Aprendiendo a utilizar la librería cURL en PHP</a>
							</h2>
							<span class="author">febrero 1, 2010 en <a href="http://web.ontuts.com/category/tutoriales/" title="Ver todas las entradas en Tutoriales" rel="category tag">Tutoriales</a> por <a href="http://web.ontuts.com/author/ivangc/" title="Entradas de Iván Guardado" rel="author">Iván Guardado</a></span>
							<div class="metainfo">
								<span class="tags"><a href="http://web.ontuts.com/tag/curl/" rel="tag">curl</a>, <a href="http://web.ontuts.com/tag/php/" rel="tag">php</a>, <a href="http://web.ontuts.com/tag/programacion/" rel="tag">programación</a>, <a href="http://web.ontuts.com/tag/tutorial/" rel="tag">tutorial</a></span>
								<span class="comments"><a href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/#comments" title="Comentarios en Aprendiendo a utilizar la librería cURL en PHP">57 Comentarios</a></span>
							</div>
						</div>
					</div>
					<div class="intro">
						<p>Analizamos y explicamos la librería cURL, una herramienta que 
permite transferir información con sintaxis de URL. Soporta gran 
variedad de protocolos (HTTP, FTP, LDAP…) y esta funciona en gran 
variedad de sistemas operativos. En esta ocasión la utilizaremos en el 
entorno que a nosotros nos interesa, en PHP.</p>
					</div>
					<div class="socialmedia">
						<a href="http://twitter.com/home?status=Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20%7C%20Web.Ontuts%20http%3A%2F%2Fbit.ly%2F" class="retweet self item" title=""><span>►&nbsp;Retweet</span></a>
						<a class="item" name="fb_share" type="button_count" href="http://www.facebook.com/sharer.php">Compartir</a><script src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/FB.txt" type="text/javascript"></script>
						<a title="Publica en Google Buzz" class="google-buzz-button item" href="http://www.google.com/buzz/post" data-button-style="small-count" data-locale="es"></a>
<script type="text/javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/button.htm"></script>
<a class="item" href="http://bitacoras.com/anotaciones/http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/a.gif" alt="votar" title="Votar esta anotación en Bitacoras.com" style="vertical-align:middle;border:0"></a>
					</div>
					<div class="authorinfo clearfix">
						<div class="fleft photo">
							<img alt="" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/05b17c5ec827e9c66952a28c5caaf9f0.jpg" class="" height="64" width="64">						</div>
						<div class="fleft desc">
							<h4>Autor: <a href="http://web.ontuts.com/author/ivangc/" title="Entradas de Iván Guardado" rel="author">Iván Guardado</a></h4>
							Intentando mejorar cada día en este mundo tan cambiante de la programación. Sígueme en <a href="https://twitter.com/#%21/ivanguardado">Twitter</a> o en <a href="https://github.com/IvanGuardado">GitHub</a>. Actualmente estoy <a href="http://ivanguardado.com/#%21/contact">disponible para contratar</a>.						</div>
					</div>
															<div class="authorinfo demobox">
						<a class="imgleft" href="http://web.ontuts.com/wp-content/uploads/tutoriales/curl_iniciacion/curl_iniciacion.zip" title="Descargar Código Fuente"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/download.png" alt="Descarga"></a>
						<a class="imgright" href="http://web.ontuts.com/wp-content/uploads/tutoriales/curl_iniciacion/" title="Ver Demostración"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/demo.png" alt="Demostración"></a>
					</div>
										<div>
						<h3>Introducción: Conociendo la librería cURL</h3>
<p>¡Hola a todos! despues de un mes de bastante trabajo y poco tiempo 
libre para escribir, vuelvo a la carga con un nuevo tutorial en PHP.</p>
<p>Quien no conozca la librería cURL, igual se ha preguntado muchas 
veces cómo hacen los sitios web para mostrar contenido de otras páginas 
en la suya. Por ejemplo, se preguntará cómo funciona la famosa 
aplicación que revisa los links escritos en el texto de una web y 
muestra una previsualización en miniatura.</p>
<p>O sin ir más lejos, puede que alguna de estas preguntas pasen por su cabeza alguna vez: <strong>¿cómo imprimes en una web el contenido RSS de un dominio ajeno?</strong>, <strong>¿cómo descargas una imagen de un servidor ajeno para no hacer abuso de recursos?</strong>, <strong>¿cómo es posible iniciar sesión en hotmail para extraer los contactos?</strong>. La respuesta es común para todas esas preguntas: usando <strong>cURL</strong>.</p>
<blockquote><p><strong>cURL</strong> te permite <strong>crear conexiones</strong>
 con distintos protocolos bajo distintos SO para poder conectar tus 
aplicaciones con otros entornos, como el web, Active Directory, etc</p></blockquote>
<p>cURL es una herramienta que permite abrir conexiones en una amplia 
variedad de protocolos y que está disponible tanto como herramienta de 
consola (para ejecutar directamente con comandos) como en librería (para
 usar en vuestro código) y que permite hacer prácticamente todo: manejo 
de cookies, descarga de ficheros binarios, envíos de parámetros GET y 
POST, etc.</p>
<p>Es tan potente y fácil de usar, que podemos crear sin muchos problemas un <strong>crawler</strong> que recorra páginas web para analizar información, al estilo de por ejemplo el Google Bot.</p>
<h3>cURL en PHP</h3>
<p>Antes de nada, os recuerdo que podéis ver la documentacion de cURL para PHP desde <a title="Librería cURL en PHP" href="http://php.net/manual/en/book.curl.php">la página oficial</a>.
 Todas las funciones y constantes predefinidas tienen el prefijo ‘curl_’
 y ‘CURL’ respectivamente, por lo que no hay problema en identificarlas 
en el código y recordarlas se hace un poco más fácil.</p>
<p>Toda conexión con cURL comienza con curl_init, que nos devolverá un manejador (<em>handler</em>) en caso de éxito o <em>FALSE</em>
 en caso de fallo. Este manejador será necesario para usar las demás 
funciones y estará disponible hasta que se llame a la funcion 
curl_close(). Vamos a ver un ejemplo sencillo:</p>
<div class="dp-highlighter"><div class="bar"><div class="tools"><a href="#" onclick="dp.sh.Toolbar.Command('ViewSource',this);return false;">view plain</a><a href="#" onclick="dp.sh.Toolbar.Command('CopyToClipboard',this);return false;">copy to clipboard</a><a href="#" onclick="dp.sh.Toolbar.Command('PrintSource',this);return false;">print</a><a href="#" onclick="dp.sh.Toolbar.Command('About',this);return false;">?</a></div></div><ol start="1" class="dp-c"><li class="alt"><span><span class="vars">$handler</span><span>&nbsp;=&nbsp;curl_init(</span><span class="string">"http://www.google.es"</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span><span class="vars">$response</span><span>&nbsp;=&nbsp;curl_exec&nbsp;(</span><span class="vars">$handler</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>curl_close(<span class="vars">$handler</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span><span class="func">echo</span><span>&nbsp;</span><span class="vars">$response</span><span>;&nbsp;&nbsp;</span></span></li></ol></div><pre name="code" class="php" style="display: none;">$handler = curl_init("http://www.google.es");
$response = curl_exec ($handler);
curl_close($handler);
echo $response;
</pre>
<p>Al ejecutar este pequeño trozo de código, lo que estáis haciendo es 
abrir una conexión con la página de Google, descargar el contenido como 
si de un navegador se tratase, e imprimirlo como si fuese contenido 
propio.</p>
<p>Como véis es muy fácil, pero normalmente suele complicarse un poco 
más la cosa, porque por ejemplo, hay webs que devuelven una respuesta u 
otra según el navegador en el que te encuentras, o en un idioma u otro 
dependiendo del valor de las cabeceras HTTP. Para definir las cabeceras 
todas correctamente, se usa la función curl_setopt().</p>
<blockquote><p>Con la funcion curl_setopt() podemos establecer las <strong>cabeceras HTTP</strong> para recibir el contenido adecuado.</p></blockquote>
<p>Para indicarle al servidor remoto que tu idioma preferido es el castellano y que tu navegador es Firefox:</p>
<div class="dp-highlighter"><div class="bar"><div class="tools"><a href="#" onclick="dp.sh.Toolbar.Command('ViewSource',this);return false;">view plain</a><a href="#" onclick="dp.sh.Toolbar.Command('CopyToClipboard',this);return false;">copy to clipboard</a><a href="#" onclick="dp.sh.Toolbar.Command('PrintSource',this);return false;">print</a><a href="#" onclick="dp.sh.Toolbar.Command('About',this);return false;">?</a></div></div><ol start="1" class="dp-c"><li class="alt"><span><span>curl_setopt(</span><span class="vars">$handler</span><span>,&nbsp;CURLOPT_USERAGENT,</span><span class="string">"Mozilla/5.0&nbsp;(Windows;&nbsp;U;&nbsp;Windows&nbsp;NT&nbsp;5.1;&nbsp;en-US;&nbsp;rv:1.9.0.1)&nbsp;Gecko/2008070208&nbsp;Firefox/3.0.1"</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span>curl_setopt(<span class="vars">$handler</span><span>,&nbsp;CURLOPT_HTTPHEADER,&nbsp;</span><span class="keyword">array</span><span>(</span><span class="string">"Accept-Language:&nbsp;es-es,en"</span><span>));&nbsp;&nbsp;</span></span></li></ol></div><pre name="code" class="php" style="display: none;">curl_setopt($handler, CURLOPT_USERAGENT,"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.1) Gecko/2008070208 Firefox/3.0.1");
curl_setopt($handler, CURLOPT_HTTPHEADER, array("Accept-Language: es-es,en"));
</pre>
<p>Puedes ver la gran lista de opciones que puedes configurar <a title="Opciones de cURL" href="http://www.php.net/manual/en/function.curl-setopt.php">aquí</a>. Normalmente cuando tienes algún problema con alguna conexión,  sueles encontrar la solución jugando con estas opciones.</p>
<h3>Envío de formularios POST</h3>
<p>Muchas veces la información que necesitamos está sometida a enviar 
parámetros con el método POST. No pasa nada, cURL como ya hemos dicho, 
nos permite hacer esto sin mucho esfuerzo. Imagina que queremos iniciar 
sesión en una web para acceder a nuestro contenido via cURL.</p>
<p>Lo primero que tenemos que hacer es iniciar sesión desde un navegador
 e identificar que parámetros POST se envían para que el login tenga 
éxito, esto se puede ver de forma muy fácil con la herramienta <a href="http://getfirebug.com/">Firebug</a> para <a href="http://www.mozilla.com/es-ES/">Mozilla Firefox</a>.</p>
<p>Imaginemos que estos son los parámetros que se envían:</p>
<ul>
<li><strong>user</strong>: ontuts</li>
<li><strong>password</strong>: test</li>
<li><strong>url</strong>: http://www.example.com/login</li>
</ul>
<p>Bien ya sabemos todo lo que necesitamos, ahora toca crear el código:</p>
<div class="dp-highlighter"><div class="bar"><div class="tools"><a href="#" onclick="dp.sh.Toolbar.Command('ViewSource',this);return false;">view plain</a><a href="#" onclick="dp.sh.Toolbar.Command('CopyToClipboard',this);return false;">copy to clipboard</a><a href="#" onclick="dp.sh.Toolbar.Command('PrintSource',this);return false;">print</a><a href="#" onclick="dp.sh.Toolbar.Command('About',this);return false;">?</a></div></div><ol start="1" class="dp-c"><li class="alt"><span><span class="vars">$url</span><span>&nbsp;=&nbsp;</span><span class="string">"http://www.example.com/login"</span><span>;&nbsp;&nbsp;</span></span></li><li class=""><span><span class="vars">$postData</span><span>&nbsp;=&nbsp;</span><span class="keyword">array</span><span>(</span><span class="string">"user"</span><span>&nbsp;=&gt;&nbsp;ontuts,&nbsp;</span><span class="string">"password"</span><span>&nbsp;=&gt;&nbsp;</span><span class="string">"test"</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span><span class="comment">/*Convierte&nbsp;el&nbsp;array&nbsp;en&nbsp;el&nbsp;formato&nbsp;adecuado&nbsp;para&nbsp;cURL*/</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span><span class="vars">$elements</span><span>&nbsp;=&nbsp;</span><span class="keyword">array</span><span>();&nbsp;&nbsp;</span></span></li><li class="alt"><span><span class="keyword">foreach</span><span>&nbsp;(</span><span class="vars">$postData</span><span>&nbsp;</span><span class="keyword">as</span><span>&nbsp;</span><span class="vars">$name</span><span>=&gt;</span><span class="vars">$value</span><span>)&nbsp;{&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;<span class="vars">$elements</span><span>[]&nbsp;=&nbsp;</span><span class="string">"{$name}="</span><span>.urlencode(</span><span class="vars">$value</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>}&nbsp;&nbsp;</span></li><li class=""><span><span class="vars">$handler</span><span>&nbsp;=&nbsp;curl_init();&nbsp;&nbsp;</span></span></li><li class="alt"><span>curl_setopt(<span class="vars">$handler</span><span>,&nbsp;CURLOPT_URL,&nbsp;</span><span class="vars">$url</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span>curl_setopt(<span class="vars">$handler</span><span>,&nbsp;CURLOPT_POST,true);&nbsp;&nbsp;</span></span></li><li class="alt"><span>curl_setopt(<span class="vars">$handler</span><span>,&nbsp;CURLOPT_POSTFIELDS,&nbsp;</span><span class="vars">$elements</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span><span class="vars">$response</span><span>&nbsp;=&nbsp;curl_exec&nbsp;(</span><span class="vars">$handler</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>curl_close(<span class="vars">$handler</span><span>);&nbsp;&nbsp;</span></span></li></ol></div><pre name="code" class="php" style="display: none;">$url = "http://www.example.com/login";
$postData = array("user" =&gt; ontuts, "password" =&gt; "test");
/*Convierte el array en el formato adecuado para cURL*/
$elements = array();
foreach ($postData as $name=&gt;$value) {
   $elements[] = "{$name}=".urlencode($value);
}
$handler = curl_init();
curl_setopt($handler, CURLOPT_URL, $url);
curl_setopt($handler, CURLOPT_POST,true);
curl_setopt($handler, CURLOPT_POSTFIELDS, $elements);
$response = curl_exec ($handler);
curl_close($handler);
</pre>
<p>Con este código lo que hacemos es acceder a la url pero enviando 
datos adjuntos que el server interpretará y nos devolverá la repuesta 
adecuada.</p>
<h3>Manejando Cookies</h3>
<p>En el ejemplo anterior vemos un ejemplo de cómo iniciar sesión en una
 web, pero si lo probáis comprobaréis que una vez iniciada la sesión, en
 la próxima petición ya no tendréis acceso.</p>
<p>Eso es debido a que por lo general, cuando inicias sesión, el 
servidor te genera una cookie que tienes que guardar y que identifica tu
 sesión para corroborar que eres tu y no otra persona malintencionada 
(como si fuese una tarjeta de identificación) la que está accediendo.</p>
<p>Por defecto cURL no guarda las cookies pero es fácil obligarle a que lo haga:</p>
<div class="dp-highlighter"><div class="bar"><div class="tools"><a href="#" onclick="dp.sh.Toolbar.Command('ViewSource',this);return false;">view plain</a><a href="#" onclick="dp.sh.Toolbar.Command('CopyToClipboard',this);return false;">copy to clipboard</a><a href="#" onclick="dp.sh.Toolbar.Command('PrintSource',this);return false;">print</a><a href="#" onclick="dp.sh.Toolbar.Command('About',this);return false;">?</a></div></div><ol start="1" class="dp-c"><li class="alt"><span><span class="comment">//Código&nbsp;de&nbsp;inicio&nbsp;de&nbsp;cURL</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span><span class="comment">//........</span><span>&nbsp;&nbsp;</span></span></li><li class="alt"><span><span class="comment">//</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span><span class="vars">$cookie_file</span><span>&nbsp;=&nbsp;</span><span class="string">"/tmp/"</span><span>.time();&nbsp;&nbsp;</span></span></li><li class="alt"><span>curl_setopt(<span class="vars">$handler</span><span>,&nbsp;CURLOPT_COOKIEFILE,&nbsp;</span><span class="vars">$cookie_file</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span>curl_setopt(<span class="vars">$handler</span><span>,&nbsp;CURLOPT_COOKIEJAR,&nbsp;</span><span class="vars">$cookie_file</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span><span class="vars">$response</span><span>&nbsp;=&nbsp;curl_exec&nbsp;(</span><span class="vars">$handler</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span>curl_close(<span class="vars">$handler</span><span>);&nbsp;&nbsp;</span></span></li></ol></div><pre name="code" class="php" style="display: none;">//Código de inicio de cURL
//........
//
$cookie_file = "/tmp/".time();
curl_setopt($handler, CURLOPT_COOKIEFILE, $cookie_file);
curl_setopt($handler, CURLOPT_COOKIEJAR, $cookie_file);
$response = curl_exec ($handler);
curl_close($handler);
</pre>
<p>Es importante advertir que para que las cookies se guarden 
correctamente, el usuario de apache (normalmente www-data) tiene que 
tener acceso de lectura y escritura en el directorio que especifiques.</p>
<p>Si juntamos esto con el ejemplo anterior, podríamos crear un script 
que se conecte por ejemplo a Facebook y escriba algo en tu muro 
automáticamente, o que recupere una lista de tus amigos, etc…</p>
<h3>Una clase para facilitar las cosas</h3>
<p>Por último os dejo una clase que he creado hace un par de meses para 
un proyecto. No se puede decir que sea una clase general ni mucho menos,
 pero funciona perfectamente para lo que la he usado: inicios de sesión y
 extracción de datos. Podéis modificarla a vuestro antojo para adaptarla
 a vuestras necesidades:</p>
<div class="dp-highlighter"><div class="bar"><div class="tools"><a href="#" onclick="dp.sh.Toolbar.Command('ViewSource',this);return false;">view plain</a><a href="#" onclick="dp.sh.Toolbar.Command('CopyToClipboard',this);return false;">copy to clipboard</a><a href="#" onclick="dp.sh.Toolbar.Command('PrintSource',this);return false;">print</a><a href="#" onclick="dp.sh.Toolbar.Command('About',this);return false;">?</a></div></div><ol start="1" class="dp-c"><li class="alt"><span><span class="comment">/**</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;*&nbsp;Clase&nbsp;para&nbsp;gestionar&nbsp;las&nbsp;conexesiones&nbsp;y&nbsp;peticiones&nbsp;a&nbsp;servidores&nbsp;remotos</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span><span class="keyword">class</span><span>&nbsp;HttpConnection&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;</span><span class="vars">$curl</span><span>;&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;</span><span class="vars">$cookie</span><span>;&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;</span><span class="vars">$cookie_path</span><span>=</span><span class="string">"/cookies"</span><span>;&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;</span><span class="vars">$id</span><span>;&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">function</span><span>&nbsp;__construct()&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$this</span><span>-&gt;id&nbsp;=&nbsp;time();&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Inicializa&nbsp;el&nbsp;objeto&nbsp;curl&nbsp;con&nbsp;las&nbsp;opciones&nbsp;por&nbsp;defecto.</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Si&nbsp;es&nbsp;null&nbsp;se&nbsp;crea</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$cookie&nbsp;a&nbsp;usar&nbsp;para&nbsp;la&nbsp;conexion</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">function</span><span>&nbsp;init(</span><span class="vars">$cookie</span><span>=null)&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>(</span><span class="vars">$cookie</span><span>)&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$this</span><span>-&gt;cookie&nbsp;=&nbsp;</span><span class="vars">$cookie</span><span>;&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$this</span><span>-&gt;cookie&nbsp;=&nbsp;</span><span class="vars">$this</span><span>-&gt;cookie_path&nbsp;.&nbsp;</span><span class="vars">$this</span><span>-&gt;id;&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$this</span><span>-&gt;curl=curl_init();&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_USERAGENT,</span><span class="string">"Mozilla/5.0&nbsp;(Windows;&nbsp;U;&nbsp;Windows&nbsp;NT&nbsp;5.1;&nbsp;en-US;&nbsp;rv:1.9.0.1)&nbsp;Gecko/2008070208&nbsp;Firefox/3.0.1"</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_HEADER,&nbsp;false);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_COOKIEFILE,</span><span class="vars">$this</span><span>-&gt;cookie);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_HTTPHEADER,&nbsp;</span><span class="keyword">array</span><span>(</span><span class="string">"Accept-Language:&nbsp;es-es,en"</span><span>));&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_COOKIEJAR,&nbsp;</span><span class="vars">$this</span><span>-&gt;cookie);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_SSL_VERIFYPEER,&nbsp;false);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_SSL_VERIFYHOST,&nbsp;false);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_HTTP_VERSION,&nbsp;CURL_HTTP_VERSION_1_0);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_RETURNTRANSFER,true);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_CONNECTTIMEOUT,&nbsp;5);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_TIMEOUT,&nbsp;60);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_AUTOREFERER,&nbsp;TRUE);&nbsp;&nbsp;</span></span></li><li class="alt"><span>}&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Establece&nbsp;en&nbsp;que&nbsp;ruta&nbsp;se&nbsp;guardan&nbsp;las&nbsp;cookies.</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Importante:&nbsp;El&nbsp;usuario&nbsp;de&nbsp;apache&nbsp;debe&nbsp;tener&nbsp;acceso&nbsp;de&nbsp;lectura&nbsp;y&nbsp;escritura</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$path</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">function</span><span>&nbsp;setCookiePath(</span><span class="vars">$path</span><span>){&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$this</span><span>-&gt;cookie_path&nbsp;=&nbsp;</span><span class="vars">$path</span><span>;&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Envía&nbsp;una&nbsp;peticion&nbsp;GET&nbsp;a&nbsp;la&nbsp;URL&nbsp;especificada</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$url</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;bool&nbsp;$follow</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string&nbsp;Respuesta&nbsp;generada&nbsp;por&nbsp;el&nbsp;servidor</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">function</span><span>&nbsp;get(</span><span class="vars">$url</span><span>,</span><span class="vars">$follow</span><span>=false)&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$this</span><span>-&gt;init();&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_URL,&nbsp;</span><span class="vars">$url</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_POST,false);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_HEADER,&nbsp;</span><span class="vars">$follow</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_REFERER,&nbsp;</span><span class="string">''</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_FOLLOWLOCATION,&nbsp;</span><span class="vars">$follow</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$result</span><span>=curl_exec&nbsp;(</span><span class="vars">$this</span><span>-&gt;curl);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>(</span><span class="vars">$result</span><span>&nbsp;===&nbsp;false){&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="func">echo</span><span>&nbsp;curl_error(</span><span class="vars">$this</span><span>-&gt;curl);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$this</span><span>-&gt;_close();&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="vars">$result</span><span>;&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Envía&nbsp;una&nbsp;petición&nbsp;POST&nbsp;a&nbsp;la&nbsp;URL&nbsp;especificada</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$url</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$post_elements</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;bool&nbsp;$follow</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;bool&nbsp;$header</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string&nbsp;Respuesta&nbsp;generada&nbsp;por&nbsp;el&nbsp;servidor</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">function</span><span>&nbsp;post(</span><span class="vars">$url</span><span>,</span><span class="vars">$post_elements</span><span>,</span><span class="vars">$follow</span><span>=false,</span><span class="vars">$header</span><span>=false)&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$this</span><span>-&gt;init();&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$elements</span><span>=</span><span class="keyword">array</span><span>();&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">foreach</span><span>&nbsp;(</span><span class="vars">$post_elements</span><span>&nbsp;</span><span class="keyword">as</span><span>&nbsp;</span><span class="vars">$name</span><span>=&gt;</span><span class="vars">$value</span><span>)&nbsp;{&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$elements</span><span>[]&nbsp;=&nbsp;</span><span class="string">"{$name}="</span><span>.urlencode(</span><span class="vars">$value</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$elements</span><span>&nbsp;=&nbsp;join(</span><span class="string">"&amp;"</span><span>,</span><span class="vars">$elements</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_URL,&nbsp;</span><span class="vars">$url</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_POST,true);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_REFERER,&nbsp;</span><span class="string">''</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_HEADER,&nbsp;</span><span class="vars">$header</span><span>&nbsp;OR&nbsp;</span><span class="vars">$follow</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_POSTFIELDS,&nbsp;</span><span class="vars">$elements</span><span>);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_FOLLOWLOCATION,&nbsp;</span><span class="vars">$follow</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$result</span><span>=curl_exec&nbsp;(</span><span class="vars">$this</span><span>-&gt;curl);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$this</span><span>-&gt;_close();&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="vars">$result</span><span>;&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Descarga&nbsp;un&nbsp;fichero&nbsp;binario&nbsp;en&nbsp;el&nbsp;buffer</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$url</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">function</span><span>&nbsp;getBinary(</span><span class="vars">$url</span><span>){&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$this</span><span>-&gt;init();&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_URL,&nbsp;</span><span class="vars">$url</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt(<span class="vars">$this</span><span>-&gt;curl,&nbsp;CURLOPT_BINARYTRANSFER,1);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$result</span><span>&nbsp;=&nbsp;curl_exec&nbsp;(</span><span class="vars">$this</span><span>-&gt;curl);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$this</span><span>-&gt;_close();&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="vars">$result</span><span>;&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**</span>&nbsp;</span></li><li class="alt"><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Cierra&nbsp;la&nbsp;conexión</span>&nbsp;</span></li><li class=""><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;</span><span class="keyword">function</span><span>&nbsp;_close()&nbsp;{&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_close(<span class="vars">$this</span><span>-&gt;curl);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">function</span><span>&nbsp;close(){&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>(</span><span class="func">file_exists</span><span>(</span><span class="vars">$this</span><span>-&gt;cookie))&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unlink(<span class="vars">$this</span><span>-&gt;cookie);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=""><span>}&nbsp;&nbsp;</span></li></ol></div><pre name="code" class="php" style="display: none;">/**
 * Clase para gestionar las conexesiones y peticiones a servidores remotos
 */
class HttpConnection {
    private $curl;
    private $cookie;
    private $cookie_path="/cookies";
    private $id;

    public function __construct() {
        $this-&gt;id = time();
    }
    /**
     * Inicializa el objeto curl con las opciones por defecto.
     * Si es null se crea
     * @param string $cookie a usar para la conexion
     */
    public function init($cookie=null) {
        if($cookie)
            $this-&gt;cookie = $cookie;
        else
            $this-&gt;cookie = $this-&gt;cookie_path . $this-&gt;id;

        $this-&gt;curl=curl_init();
        curl_setopt($this-&gt;curl, CURLOPT_USERAGENT,"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.1) Gecko/2008070208 Firefox/3.0.1");
        curl_setopt($this-&gt;curl, CURLOPT_HEADER, false);
        curl_setopt($this-&gt;curl, CURLOPT_COOKIEFILE,$this-&gt;cookie);
        curl_setopt($this-&gt;curl, CURLOPT_HTTPHEADER, array("Accept-Language: es-es,en"));
        curl_setopt($this-&gt;curl, CURLOPT_COOKIEJAR, $this-&gt;cookie);
        curl_setopt($this-&gt;curl, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($this-&gt;curl, CURLOPT_SSL_VERIFYHOST, false);
        curl_setopt($this-&gt;curl, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0);
        curl_setopt($this-&gt;curl, CURLOPT_RETURNTRANSFER,true);
        curl_setopt($this-&gt;curl, CURLOPT_CONNECTTIMEOUT, 5);
        curl_setopt($this-&gt;curl, CURLOPT_TIMEOUT, 60);
        curl_setopt($this-&gt;curl, CURLOPT_AUTOREFERER, TRUE);
}
    /**
     * Establece en que ruta se guardan las cookies.
     * Importante: El usuario de apache debe tener acceso de lectura y escritura
     * @param string $path
     */
    public function setCookiePath($path){
        $this-&gt;cookie_path = $path;
    }
    /**
     * Envía una peticion GET a la URL especificada
     * @param string $url
     * @param bool $follow
     * @return string Respuesta generada por el servidor
     */
    public function get($url,$follow=false) {
        $this-&gt;init();
        curl_setopt($this-&gt;curl, CURLOPT_URL, $url);
        curl_setopt($this-&gt;curl, CURLOPT_POST,false);
        curl_setopt($this-&gt;curl, CURLOPT_HEADER, $follow);
        curl_setopt($this-&gt;curl, CURLOPT_REFERER, '');
        curl_setopt($this-&gt;curl, CURLOPT_FOLLOWLOCATION, $follow);
        $result=curl_exec ($this-&gt;curl);
        if($result === false){
            echo curl_error($this-&gt;curl);
        }
        $this-&gt;_close();
        return $result;
    }
    /**
     * Envía una petición POST a la URL especificada
     * @param string $url
     * @param array $post_elements
     * @param bool $follow
     * @param bool $header
     * @return string Respuesta generada por el servidor
     */
    public function post($url,$post_elements,$follow=false,$header=false) {
        $this-&gt;init();
        $elements=array();
        foreach ($post_elements as $name=&gt;$value) {
            $elements[] = "{$name}=".urlencode($value);
        }
        $elements = join("&amp;",$elements);
        curl_setopt($this-&gt;curl, CURLOPT_URL, $url);
        curl_setopt($this-&gt;curl, CURLOPT_POST,true);
        curl_setopt($this-&gt;curl, CURLOPT_REFERER, '');
        curl_setopt($this-&gt;curl, CURLOPT_HEADER, $header OR $follow);
        curl_setopt($this-&gt;curl, CURLOPT_POSTFIELDS, $elements);
        curl_setopt($this-&gt;curl, CURLOPT_FOLLOWLOCATION, $follow);
        $result=curl_exec ($this-&gt;curl);
        $this-&gt;_close();
        return $result;
    }
    /**
     * Descarga un fichero binario en el buffer
     * @param string $url
     * @return string
     */
    public function getBinary($url){
        $this-&gt;init();
        curl_setopt($this-&gt;curl, CURLOPT_URL, $url);
        curl_setopt($this-&gt;curl, CURLOPT_BINARYTRANSFER,1);
        $result = curl_exec ($this-&gt;curl);
        $this-&gt;_close();
        return $result;
    }
    /**
     * Cierra la conexión
     */
    private function _close() {
        curl_close($this-&gt;curl);
    }
    public function close(){
        if(file_exists($this-&gt;cookie))
            unlink($this-&gt;cookie);
    }
}
</pre>
<h4>Modo de uso</h4>
<div class="dp-highlighter"><div class="bar"><div class="tools"><a href="#" onclick="dp.sh.Toolbar.Command('ViewSource',this);return false;">view plain</a><a href="#" onclick="dp.sh.Toolbar.Command('CopyToClipboard',this);return false;">copy to clipboard</a><a href="#" onclick="dp.sh.Toolbar.Command('PrintSource',this);return false;">print</a><a href="#" onclick="dp.sh.Toolbar.Command('About',this);return false;">?</a></div></div><ol start="1" class="dp-c"><li class="alt"><span><span class="vars">$http</span><span>&nbsp;=&nbsp;</span><span class="keyword">new</span><span>&nbsp;HttpConnection();&nbsp;&nbsp;</span></span></li><li class=""><span><span class="vars">$http</span><span>-&gt;setCookiePath(</span><span class="string">"/my_cookie_path/"</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span><span class="vars">$http</span><span>-&gt;init();&nbsp;&nbsp;</span></span></li><li class=""><span><span class="func">echo</span><span>&nbsp;</span><span class="vars">$http</span><span>-&gt;get(</span><span class="string">"http://www.google.es"</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span><span class="vars">$http</span><span>-&gt;close();&nbsp;&nbsp;</span></span></li></ol></div><pre name="code" class="php" style="display: none;">$http = new HttpConnection();
$http-&gt;setCookiePath("/my_cookie_path/");
$http-&gt;init();
echo $http-&gt;get("http://www.google.es");
$http-&gt;close();
</pre>
<h3>Como conclusión…</h3>
<p>La librería cURL puede llegar a ser extramadamente útil en muchas 
ocasiones: podemos crear scripts automáticos que entren en determinadas 
páginas web e interaccionen por nosotros, recoger datos de forma 
automática y guardarlos en una base de datos, indexar contenido de otras
 páginas a modo de buscador, recoger todas las imágenes de una misma 
página como hace facebook al compartir sus enlaces…</p>
<p>Si bien puede que muchos de vosotros no la conocieseis, seguro que 
para próximos proyectos se os viene a la cabeza esta librería y 
terminaréis haciendo un buen uso intensivo de cURL <img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/icon_smile.gif" alt=":)" class="wp-smiley"> .</p>
<p>¡Nos vemos en el próximo tutorial!</p>
					</div>
					
					<div class="enjoy">
						<h3>Te sugerimos otras entradas relacionadas...</h3>
<ul id="related">
		<li>
				<a href="http://web.ontuts.com/tutoriales/introduccion-a-cookies-en-la-web/" title=""><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/cookies.png" alt=""></a>
		<a href="http://web.ontuts.com/tutoriales/introduccion-a-cookies-en-la-web/" rel="bookmark">Introducción a Cookies en la Web</a>
		</li>
		<li>
				<a href="http://web.ontuts.com/tutoriales/sesiones-en-php/" title=""><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/sesiones.png" alt=""></a>
		<a href="http://web.ontuts.com/tutoriales/sesiones-en-php/" rel="bookmark">Sesiones en PHP</a>
		</li>
		<li>
				<a href="http://web.ontuts.com/tutoriales/acelerando-los-tiempos-de-carga-uniendo-archivos-javascript-con-php/" title=""><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/uniendojs.png" alt=""></a>
		<a href="http://web.ontuts.com/tutoriales/acelerando-los-tiempos-de-carga-uniendo-archivos-javascript-con-php/" rel="bookmark">Acelerando los tiempos de carga uniendo archivos Javascript con PHP</a>
		</li>
		<li>
				<a href="http://web.ontuts.com/tutoriales/que-son-y-como-utilizar-los-custom-fields-de-wordpress/" title=""><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/customfields.png" alt=""></a>
		<a href="http://web.ontuts.com/tutoriales/que-son-y-como-utilizar-los-custom-fields-de-wordpress/" rel="bookmark">Qué son y cómo utilizar los custom fields de WordPress</a>
		</li>
	</ul>
					</div>
					
					<div class="enjoy" style="padding-bottom:25px;">
						<h3>¿Necesitas desarrollar un proyecto web o para móviles? ¡Estamos disponibles!</h3>
						<center><a class="nomargin" href="http://cokidoo.com/"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/cokidoo_large.png" alt="Visitar Cokidoo"></a></center>
                                                <p>
                                                    <a class="nomargin" href="http://cokidoo.com/" title="¡Entra y conócenos!">Cokidoo</a>, los creadores de Ontuts,
                                                    desarrollamos proyectos tecnológicos centrados en <a class="nomargin" href="http://cokidoo.com/servicios/desarrollo-de-redes-sociales-tiendas-online-blogs-y-paginas-corporativas/">redes sociales y aplicaciones web</a>, <a class="nomargin" href="http://cokidoo.com/servicios/desarrollo-para-moviles-iphone-android-windows-phone-e-ipad/">aplicaciones móviles</a> y <a class="nomargin" href="http://cokidoo.com/servicios/consultoria-web-optimizacion-web-y-de-bases-de-datos/">consultoría web y bases de datos</a>.
                                                </p>
                                                <p>
                                                    Somos jóvenes, 
inquietos, versátiles, apasionados por la innovación y enfocados en las 
nuevas tecnologías. Con Ontuts tratamos de compartir nuestro 
conocimiento
                                                    adquirido en los 
distintos proyectos, ayudando a la comunidad y mostrando nuestra 
capacidad tecnológica.
                                                </p>
                                                <p>Si necesitas un presupuesto sin compromiso, estamos disponibles, no dudes en <a class="nomargin" href="http://cokidoo.com/contacto/">contactar con nosotros</a>.</p>

					</div>
				</div>
			</div>
			<div class="post comments">
				<a name="comments"></a>
				<div class="entry">
					
<!-- You can start editing here. -->
<h3>Comentarios en esta publicación (57 comentarios)</h3>
	<p class="padbot36">
		¿Te ha gustado esta publicación? ¡Puedes compartir tu opinión con todos nosotros! Simplemente <a href="#write" title="">pincha aquí mismo</a>.
	</p>

	   
	<div class="comment clearfix" id="comment-24335">
		<div class="name fleft">
			<img alt="" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/034d3f222ceca05ae4d71feba3c38fbb.htm" class="avatar avatar-64 photo" height="64" width="64">			<strong class="authorcomment">Roy</strong>		</div>

		<div class="message fleft">
						<p>Hola muy buen tuto, solo que no me anda el post, la pagina del 
google me carga perfecta pero cuando hago la consulta me sale un error 
404, esto pasa incluso en el demo que esta en este site, por favor me 
podrían indicar como arreglarlo</p>
<p>gracias</p>
			<div class="date">
				<a href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/comment-page-2/#comment-24335">Publicado el día 28 de febrero del año 2012</a>
			</div>
					</div>
</div>
   
	<div class="comment clearfix" id="comment-34206">
		<div class="name fleft">
			<img alt="" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/14e6e0c28ecefd279085d7826496ff5b.jpg" class="avatar avatar-64 photo" height="64" width="64">			<strong class="authorcomment">Jontan</strong>		</div>

		<div class="message fleft">
						<p>Maestro, gracias por la info uno de los mejores tutoriales que he visto del tema</p>
			<div class="date">
				<a href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/comment-page-2/#comment-34206">Publicado el día 11 de julio del año 2012</a>
			</div>
					</div>
</div>
   
	<div class="comment clearfix" id="comment-34207">
		<div class="name fleft">
			<img alt="" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/05b17c5ec827e9c66952a28c5caaf9f0_002.jpg" class="avatar avatar-64 photo" height="64" width="64">			<strong class="authorcomment"><a href="http://twitter.com/ivanguardado" rel="external nofollow" class="url">Iván Guardado</a></strong>		</div>

		<div class="message fleft">
						<p>Muchas gracias! <img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
			<div class="date">
				<a href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/comment-page-2/#comment-34207">Publicado el día 11 de julio del año 2012</a>
			</div>
					</div>
</div>
   
	<div class="comment clearfix" id="comment-40828">
		<div class="name fleft">
			<img alt="" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/da4201cef679ac71603ae5e74612b49d.htm" class="avatar avatar-64 photo" height="64" width="64">			<strong class="authorcomment">Fernando</strong>		</div>

		<div class="message fleft">
						<p>Hola. Genial, no sabía que existía esta posibilidad, que en mi 
caso me sirve para usar include si está deshabilitado en el servidor. 
Sólo una pregunta, al usar</p>
<p>Al final, después de mostrarme la página, me sale el número “1″ ¿porqué sale esto y cómo se puede quitar?</p>
<p>También me ha ocurrido que al insertar una web no me muestra las 
imágenes, aunque sí todo el contenido en texto. Ocurre cuando estas 
imágenes (hojas de estilo, etc) tienen en la página original una ruta 
relativa y no absoluta. Estas últimas sí las muestra ¿cómo se soluciona?</p>
<p>Muchas gracias.</p>
			<div class="date">
				<a href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/comment-page-2/#comment-40828">Publicado el día 05 de octubre del año 2012</a>
			</div>
					</div>
</div>
   
	<div class="comment clearfix" id="comment-40829">
		<div class="name fleft">
			<img alt="" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/da4201cef679ac71603ae5e74612b49d.htm" class="avatar avatar-64 photo" height="64" width="64">			<strong class="authorcomment">Fernando</strong>		</div>

		<div class="message fleft">
						<p>Perdón, evidentemente no se ha mostrado el código en el 
mensaje. Me refería a la llamada a la página de Google del primer 
ejemplo.</p>
			<div class="date">
				<a href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/comment-page-2/#comment-40829">Publicado el día 05 de octubre del año 2012</a>
			</div>
					</div>
</div>
   
	<div class="comment clearfix" id="comment-50060">
		<div class="name fleft">
			<img alt="" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/1d507cc0495ca2c916436273d73e9156.htm" class="avatar avatar-64 photo" height="64" width="64">			<strong class="authorcomment">rydycNt</strong>		</div>

		<div class="message fleft">
						<p><a href="http://leconfiseur.com/" rel="nofollow">canada goose soldes</a>	EgIsGu	<a href="http://leconfiseur.com/" rel="nofollow">canada goose soldes</a>	BbQoJz	<a href="http://leconfiseur.com/" rel="nofollow">http://leconfiseur.com</a></p>
			<div class="date">
				<a href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/comment-page-2/#comment-50060">Publicado el día 04 de noviembre del año 2012</a>
			</div>
					</div>
</div>
   
	<div class="comment clearfix" id="comment-59530">
		<div class="name fleft">
			<img alt="" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/a56f1768cf1ffc4df4803cda6a90b973.jpg" class="avatar avatar-64 photo" height="64" width="64">			<strong class="authorcomment">Vicent</strong>		</div>

		<div class="message fleft">
						<p>Estoy utilizando la clase, para validarme en un formulario (con
 campos post username y password) y después poder entrar a una página 
del área privada, para analizarla, pero estoy utilizándola mal, porque 
no puede acceder, algún ejemplo de como hacer esto.</p>
			<div class="date">
				<a href="http://web.ontuts.com/tutoriales/aprendiendo-a-utilizar-la-libreria-curl-en-php/comment-page-2/#comment-59530">Publicado el día 22 de noviembre del año 2012</a>
			</div>
					</div>
</div>

 
				</div>
			</div>
		</div>

		</div>
	
		<div id="sidebar" class="fright" role="complementary">
		<div class="section search">
			<form role="search" method="get" id="searchform" action="http://web.ontuts.com/">
				<input value="Buscar en Ontuts..." name="s" id="s" type="text">
				<input class="search" id="searchsubmit" value="" type="submit">
			</form>		</div>
		
		<div class="section banner">
			<ul>
				<li class="">
					<h3>
						<a href="http://cokidoo.com/" title="¡Conoce a los creadores de Ontuts!">Conoce a los creadores...</a>
					</h3>
				</li>
				<li class="banner">
					<a href="http://cokidoo.com/" title="¡Conoce a los creadores de Ontuts!">
						<img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/cokidoo_banner.png" alt="">
					</a>
				</li>
				<li class="desc last">
					Desde la empresa <a href="http://cokidoo.com/" title="¡Conoce a los creadores de Ontuts!"><u>Cokidoo</u></a>
					tratamos de ayudar a <a href="http://cokidoo.com/" title="¡Conoce a los creadores de Ontuts!">desarrolladores y diseñadores web</a>
					compartiendo nuestro conocimiento.
				</li>
			</ul>
		</div>
		
		<div class="section">
			<ul>
				<li class="rss"><a href="http://web.ontuts.com/feed/" title="Suscríbete a nuestro RSS!"> Suscritos al Feed RSS</a></li>
				<li class="twitter"><a href="http://twitter.com/adrianmg" title="Síguenos en twitter!"> Followers en Twitter</a></li>
				<li class="fb"><a href="http://www.facebook.com/ontuts" title="Hazte Fan nuestro en Facebook!">442 Fans en Facebook</a></li>
                <li class="email"><a href="http://feedburner.google.com/fb/a/mailverify?uri=web-ontuts&amp;loc=es_ES" title="Suscríbete via E-mail!">¡Suscríbete via E-mail ahora!</a></li>
				<li class="cracks last"><a href="http://cracks.ontuts.com/" title="Conoce a los mejores especialistas!">cracks.ontuts: sólo los mejores</a></li>
			</ul>
		</div>
		
		<ul class="smallads clearfix">
			<li>
				<!-- BuySellAds.com Zone Code -->
	            <div id="bsap_1246310" class="bsap_1246310 bsap"><a href="https://www.buysellads.com/buy/detail/23926/zone/1246310?utm_source=site_23926&amp;utm_medium=website&amp;utm_campaign=adhere&amp;utm_content=zone_1246310" title="Advertise Here" class="adhere ad1 odd" target="_blank">Advertise Here</a><a href="https://www.buysellads.com/buy/detail/23926/zone/1246310?utm_source=site_23926&amp;utm_medium=website&amp;utm_campaign=adhere&amp;utm_content=zone_1246310" title="Advertise Here" class="adhere ad2 even" target="_blank">Advertise Here</a></div>
	            <!-- END BuySellAds.com Zone Code -->
			</li>
		</ul>
		<div class="section banner">
			<ul>
				<li class="banner">
					<a id="plans" href="http://web.ontuts.com/anunciarse-en-ontuts/" title="¡Promociónate en Ontuts!">Anunciarse en Ontuts</a>
				</li>
				<li class="desc last">Ayudamos a promocionar productos y servicios a empresas y freelancers.</li>
			</ul>
		</div>
		
		<div class="section gallerysection">
			<ul>
				<li class="flickr"><h3><a href="http://www.flickr.com/groups/ontuts/" title="Únete a la inspiración en nuestro grupo de flickr!">Únete a la Comunidad flickr</a></h3></li>
			</ul>
			<ul class="gallery clearfix">
			<li><a href="http://www.flickr.com/photos/9555157@N07/5496181310/in/pool-1240811@N21" title="Moooland logo concept 01"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/5496181310_c082d776bc_s.jpg" alt="Moooland logo concept 01"></a></li><li><a href="http://www.flickr.com/photos/manurs/5353141293/in/pool-1240811@N21" title="Cineat // Cinema-Restaurant slowfood logo"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/5353141293_ff341b9574_s.jpg" alt="Cineat // Cinema-Restaurant slowfood logo"></a></li><li><a href="http://www.flickr.com/photos/9555157@N07/5327668981/in/pool-1240811@N21" title="cracks wordpress theme homepage"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/5327668981_ddd953efb9_s.jpg" alt="cracks wordpress theme homepage"></a></li><li><a href="http://www.flickr.com/photos/jorgedsg/5091485418/in/pool-1240811@N21" title="Mediaguas Sur"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/5091485418_46417ff78d_s.jpg" alt="Mediaguas Sur"></a></li><li><a href="http://www.flickr.com/photos/jorgedsg/5091484938/in/pool-1240811@N21" title="Movimiento Audiográfico"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/5091484938_06cda7ef12_s.jpg" alt="Movimiento Audiográfico"></a></li><li><a href="http://www.flickr.com/photos/jorgedsg/5090970707/in/pool-1240811@N21" title="S&amp;G - Capacitaciones"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/5090970707_d79ed3f435_s.jpg" alt="S&amp;G - Capacitaciones"></a></li>			</ul>
		</div>
    <div class="section banner clearfix">
      <a href="http://themeforest.net/user/AdrianMG/portfolio?ref=adrianmg"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/themes_sidebar_banner.png" alt="themes baratos wordpress"></a>
    </div>


		<div class="section">
			<ul>
				<li class="tags"><h3>Se ha escrito sobre...</h3></li>
			</ul>
			<div class="tagcloud"><a href="http://web.ontuts.com/tag/analisis/" class="tag-link-50" title="2 temas" style="font-size: 8pt;">análisis</a>
<a href="http://web.ontuts.com/tag/apis/" class="tag-link-43" title="2 temas" style="font-size: 8pt;">apis</a>
<a href="http://web.ontuts.com/tag/arte/" class="tag-link-119" title="3 temas" style="font-size: 9.4867256637168pt;">arte</a>
<a href="http://web.ontuts.com/tag/base-datos/" class="tag-link-31" title="2 temas" style="font-size: 8pt;">base datos</a>
<a href="http://web.ontuts.com/tag/concursos/" class="tag-link-22" title="5 temas" style="font-size: 11.716814159292pt;">concursos</a>
<a href="http://web.ontuts.com/tag/consejos/" class="tag-link-61" title="2 temas" style="font-size: 8pt;">consejos</a>
<a href="http://web.ontuts.com/tag/css/" class="tag-link-15" title="13 temas" style="font-size: 16.300884955752pt;">css</a>
<a href="http://web.ontuts.com/tag/diseno/" class="tag-link-17" title="40 temas" style="font-size: 22pt;">diseño</a>
<a href="http://web.ontuts.com/tag/ecommerce/" class="tag-link-59" title="2 temas" style="font-size: 8pt;">ecommerce</a>
<a href="http://web.ontuts.com/tag/entrevista/" class="tag-link-34" title="4 temas" style="font-size: 10.725663716814pt;">entrevista</a>
<a href="http://web.ontuts.com/tag/fuentes/" class="tag-link-32" title="10 temas" style="font-size: 14.938053097345pt;">fuentes</a>
<a href="http://web.ontuts.com/tag/google/" class="tag-link-25" title="6 temas" style="font-size: 12.58407079646pt;">google</a>
<a href="http://web.ontuts.com/tag/gratis/" class="tag-link-14" title="15 temas" style="font-size: 16.920353982301pt;">gratis</a>
<a href="http://web.ontuts.com/tag/herramientas/" class="tag-link-81" title="2 temas" style="font-size: 8pt;">herramientas</a>
<a href="http://web.ontuts.com/tag/html/" class="tag-link-130" title="3 temas" style="font-size: 9.4867256637168pt;">html</a>
<a href="http://web.ontuts.com/tag/html5/" class="tag-link-146" title="3 temas" style="font-size: 9.4867256637168pt;">html5</a>
<a href="http://web.ontuts.com/tag/iconos/" class="tag-link-13" title="19 temas" style="font-size: 18.159292035398pt;">iconos</a>
<a href="http://web.ontuts.com/tag/imagenes/" class="tag-link-94" title="5 temas" style="font-size: 11.716814159292pt;">imágenes</a>
<a href="http://web.ontuts.com/tag/indie/" class="tag-link-114" title="2 temas" style="font-size: 8pt;">indie</a>
<a href="http://web.ontuts.com/tag/inspiracion/" class="tag-link-8" title="29 temas" style="font-size: 20.389380530973pt;">Inspiración</a>
<a href="http://web.ontuts.com/tag/internet-explorer/" class="tag-link-47" title="2 temas" style="font-size: 8pt;">internet explorer</a>
<a href="http://web.ontuts.com/tag/javascript/" class="tag-link-10" title="16 temas" style="font-size: 17.29203539823pt;">javascript</a>
<a href="http://web.ontuts.com/tag/jquery/" class="tag-link-9" title="10 temas" style="font-size: 14.938053097345pt;">jquery</a>
<a href="http://web.ontuts.com/tag/juno/" class="tag-link-24" title="2 temas" style="font-size: 8pt;">juno</a>
<a href="http://web.ontuts.com/tag/logos/" class="tag-link-20" title="14 temas" style="font-size: 16.672566371681pt;">logos</a>
<a href="http://web.ontuts.com/tag/maquetacion/" class="tag-link-16" title="7 temas" style="font-size: 13.203539823009pt;">maquetacion</a>
<a href="http://web.ontuts.com/tag/microsoft/" class="tag-link-41" title="4 temas" style="font-size: 10.725663716814pt;">microsoft</a>
<a href="http://web.ontuts.com/tag/noticias/" class="tag-link-4" title="13 temas" style="font-size: 16.300884955752pt;">noticias</a>
<a href="http://web.ontuts.com/tag/novedades/" class="tag-link-49" title="2 temas" style="font-size: 8pt;">novedades</a>
<a href="http://web.ontuts.com/tag/opinion-tag/" class="tag-link-82" title="8 temas" style="font-size: 13.823008849558pt;">opinión</a>
<a href="http://web.ontuts.com/tag/optimizacion/" class="tag-link-93" title="6 temas" style="font-size: 12.58407079646pt;">optimización</a>
<a href="http://web.ontuts.com/tag/php/" class="tag-link-12" title="16 temas" style="font-size: 17.29203539823pt;">php</a>
<a href="http://web.ontuts.com/tag/programacion/" class="tag-link-11" title="29 temas" style="font-size: 20.389380530973pt;">programación</a>
<a href="http://web.ontuts.com/tag/python/" class="tag-link-23" title="2 temas" style="font-size: 8pt;">python</a>
<a href="http://web.ontuts.com/tag/recursos/" class="tag-link-7" title="35 temas" style="font-size: 21.380530973451pt;">Recursos web</a>
<a href="http://web.ontuts.com/tag/silverlight/" class="tag-link-40" title="3 temas" style="font-size: 9.4867256637168pt;">silverlight</a>
<a href="http://web.ontuts.com/tag/sorteos/" class="tag-link-57" title="3 temas" style="font-size: 9.4867256637168pt;">sorteos</a>
<a href="http://web.ontuts.com/tag/sprites/" class="tag-link-37" title="2 temas" style="font-size: 8pt;">sprites</a>
<a href="http://web.ontuts.com/tag/themes/" class="tag-link-154" title="3 temas" style="font-size: 9.4867256637168pt;">themes</a>
<a href="http://web.ontuts.com/tag/tipografia/" class="tag-link-33" title="13 temas" style="font-size: 16.300884955752pt;">tipografia</a>
<a href="http://web.ontuts.com/tag/tutorial/" class="tag-link-46" title="6 temas" style="font-size: 12.58407079646pt;">tutorial</a>
<a href="http://web.ontuts.com/tag/videojuegos/" class="tag-link-115" title="3 temas" style="font-size: 9.4867256637168pt;">videojuegos</a>
<a href="http://web.ontuts.com/tag/web/" class="tag-link-83" title="3 temas" style="font-size: 9.4867256637168pt;">web</a>
<a href="http://web.ontuts.com/tag/wordpress/" class="tag-link-60" title="5 temas" style="font-size: 11.716814159292pt;">wordpress</a>
<a href="http://web.ontuts.com/tag/xbox/" class="tag-link-80" title="2 temas" style="font-size: 8pt;">xbox</a></div>
		</div>
               
		<ul class="smallads clearfix">
			<li><a href="http://themeforest.net/?ref=adrianmg" title="Visitar ThemeForest"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/themeforest.png" alt=""></a></li>
			<li class="right"><a href="http://graphicriver.net/?ref=adrianmg" title="Visitar GraphivRiver"><img src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/graphicriver.png" alt=""></a></li>
			<!--<li class="right"><a href="http://web.ontuts.com/anunciarse-en-ontuts/" title="">Anunciarse aquí</a></li>
			<li class="right"><a href="http://web.ontuts.com/anunciarse-en-ontuts/" title="">Anunciarse aquí</a></li>-->
		</ul>
	</div>	
</div>



<div id="footer" role="contentinfo">
		Ontuts.com, tutoriales, diseño, inspiracion &amp; recursos web - <a href="http://web.ontuts.com/feed/">Entradas (RSS)</a>
		and <a href="http://web.ontuts.com/comments/feed/">Comentarios (RSS)</a>. Algunos iconos de <a href="http://wefunction.com/" title="">WeFunction</a>.
</div>
<!-- used to fix the margin-bottom for explorers ¬¬_ -->
<span>

</span></div>

<!-- Design & Code by Adrian "yens" Mato Gondelle - http://yensdesign.com -->

<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shCore.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushCSharp.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushPhp.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushJScript.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushJava.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushVb.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushSql.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushXml.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushDelphi.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushPython.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushRuby.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushCss.js"></script>
<script class="javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shBrushCpp.js"></script>
<script class="javascript">
dp.SyntaxHighlighter.ClipboardSwf = 'http://web.ontuts.com/wp-content/plugins/google-syntax-highlighter/Scripts/clipboard.swf';
dp.SyntaxHighlighter.HighlightAll('code');
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10902965-1");
pageTracker._trackPageview();
} catch(err) {}</script>


<style type="text/css">a.retweet { font: 12px Helvetica,Arial; color: #000; text-decoration: none; border: 0px; }a.retweet span { color: #FFF; background: #94CC3D; margin-left: 2px; border: 1px solid #43A52A; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; padding: 3px; }a.vert { display: block; text-align: center; font-size: 16px; float: left; margin: 4px; }a.retweet strong.vert { display: block; margin-bottom: 4px; background: #F5F5F5; border: 1px solid #EEE; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; padding: 3px; }a.retweet span.vert { display: block; font-size: 12px; margin-left: 0px; }</style><script language="javascript" type="text/javascript" src="Aprendiendo%20a%20utilizar%20la%20librer%C3%ADa%20cURL%20en%20PHP%20_%20Web.Ontuts_files/shorten"></script></body></html>